#!/bin/sh
#vim: syntax=sh

set -eu

DESKTOP=$HOME/Desktop
BUFFER_PATH=$DESKTOP/buf

mkdir -p "$DESKTOP/buf"

for file in ~/Desktop/*; do
  test "$file" = "$BUFFER_PATH" && continue

  filename=$(basename "$file")
  target=$BUFFER_PATH/$filename

  if [ -f "$target" ]; then
    time=$(date +%s%3)
    mv "$file" "$BUFFER_PATH/${time}${filename}"
  else
    mv "$file" "$BUFFER_PATH/$filename"
  fi
done
